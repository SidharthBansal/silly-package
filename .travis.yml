language: python
python:
  - "3.5"
  - "3.6"

install:
  - pip install twine

before_script:
  - python main/main/test_main.py
  - python secondary/secondary/test_secondary.py

script:
  if: tag =~ main AND branch = master
    - cd tdvt && python setup.py sdist
    - twine upload --repository-url DEV_PYPI main/dist/*
    # - twine upload --repository-url PRD_PYPI tdvt/dist/*

  if: tag =~ secondary AND branch = master
    - cd secondary && python setup.py sdist
    - twine upload --repository-url DEV_PYPI secondary/dist/*
